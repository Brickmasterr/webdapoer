<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <%- include('../block/head.ejs') %>
    <!-- plugins:css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/vendors/simple-line-icons/css/simple-line-icons.css">
    <link rel="stylesheet" href="/assets/vendors/flag-icon-css/css/flag-icons.min.css">
    <link rel="stylesheet" href="/assets/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- Plugin css for this page -->
    <link rel="stylesheet" href="/assets/vendors/font-awesome/css/font-awesome.min.css" />
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <!-- endinject -->
    <!-- Layout styles -->
    <link rel="stylesheet" href="/assets/css/vertical-light-layout/style.css">
    <!-- End layout styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@8/dist/sweetalert2.min.css">
    <link rel='stylesheet' href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css'>
    <style>
      .table td img {
          width: 100px;
          height: 100px;
      }
    </style>
    <link rel="stylesheet" href="//cdn.datatables.net/2.0.8/css/dataTables.dataTables.min.css">
    <link rel="stylesheet" href="/assets/css/dashboard.css">
  </head>
  <body>
    <div class="container-scroller">
      <!-- PRO BANNER -->
      <!-- partial:partials/_navbar.html -->
      <%- include('../block/navbar.ejs') %>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_sidebar.html -->
        <%- include('../block/sidebar.ejs') %>
        <!-- partial -->
        <div class="main-panel">
          <div class="content-wrapper">
            <!-- INFORMATION -->
            <div class="row">
              <div class="col-md-12 grid-margin">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="d-sm-flex align-items-baseline report-summary-header">
                          <h5 class="font-weight-semibold">Information</h5>
                        </div>
                      </div>
                    </div>
                    <div class="row report-inner-cards-wrapper">
                      <div class=" col-md -6 col-xl report-inner-card">
                        <div class="inner-card-text">
                          <span class="report-title">TOTAL PRODUK</span>
                          <h4><%= PRODUCTS.length %> Produk</h4>
                        </div>
                        <div class="inner-card-icon bg-success">
                          <i class="fa-brands fa-product-hunt"></i>
                        </div>
                      </div>
                      <div class="col-md-6 col-xl report-inner-card">
                        <div class="inner-card-text">
                          <span class="report-title">TOTAL JENIS VARIAN</span>
                          <h4><%= LAYANAN.length %> Jenis Varian</h4>
                        </div>
                        <div class="inner-card-icon bg-info">
                          <i class="fa-solid fa-layer-group"></i>
                        </div>
                      </div>
                      <div class="col-md-6 col-xl report-inner-card">
                        <div class="inner-card-text">
                          <span class="report-title">TOTAL LAYANAN</span>
                          <h4><%= LAYANAN.length %> Layanan</h4>
                        </div>
                        <div class="inner-card-icon bg-danger">
                          <i class="icon-briefcase"></i>
                        </div>
                      </div>
                      <div class="col-md-6 col-xl report-inner-card">
                        <div class="inner-card-text">
                          <span class="report-title">TOTAL REVIEW</span>
                          <h4><%= REVIEW.length %> Reviews</h4>
                        </div>
                        <div class="inner-card-icon bg-warning">
                          <i class="icon-globe-alt"></i>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Quick Action -->
             <%- include('../block/quick-action.ejs') %>
            <!-- Quick Action Toolbar Ends-->
            <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                      <h4 class="card-title mb-sm-0">List Produk</h4>
                      <!-- <a href="#" class="text-dark ms-auto mb-3 mb-sm-0"> View all Products</a> -->
                    </div>
                    <div class="table-responsive border rounded p-1">
                      <table class="table" id="product-list">
                        <thead>
                          <tr>
                            <th class="font-weight-bold">ID</th>
                            <th class="font-weight-bold">Title</th>
                            <th class="font-weight-bold">Description</th>
                            <th class="font-weight-bold">Image</th>
                            <th class="font-weight-bold">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <%-
                            PRODUCTS.map((product, index) => {
                              return `
                              <tr>
                                <td>${product.productId}</td>
                                <td>${product.title}</td>
                                <td class="text-wrap">${product.description}</td>
                                <td><img style="border-radius: 0;min-width: 15rem; min-height: 15rem;max-width: 25rem; max-height: 25rem;" src="${product.image}" alt="product image"></td>
                                <td>
                                  <button type="button" class="btn btn-danger btn-icon-text btn-sm" onclick="DeleteConfirmation('${product.productId}', 'product')"
                                    style="width: 100px;">
                                     Hapus <i class="fa fa-trash-o btn-icon-append"></i>
                                  </button>
                                  <br>
                                  <button type="button" class="btn btn-dark btn-icon-text btn-sm" onclick="location.href='/dashboard/product/${product.productId}'"
                                    style="width: 100px; margin-top: 5px;">
                                     Ubah <i class="fa fa-edit btn-icon-append"></i>
                                  </button>
                                </td>
                              </tr>
                              `
                            }).join('')
                          %>
                        </tbody>
                      </table>
                    </div>
                    <!-- <div class="d-flex mt-4 flex-wrap align-items-center">
                      <p class="text-muted mb-sm-0">Showing 1 to 10 of 57 entries</p>
                      <nav class="ms-auto">
                        <ul class="pagination separated pagination-info mb-sm-0">
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-left"></i></a></li>
                          <li class="page-item active"><a href="#" class="page-link">1</a></li>
                          <li class="page-item"><a href="#" class="page-link">2</a></li>
                          <li class="page-item"><a href="#" class="page-link">3</a></li>
                          <li class="page-item"><a href="#" class="page-link">4</a></li>
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-right"></i></a></li>
                        </ul>
                      </nav>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <!-- Layanan -->
            <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                      <h4 class="card-title mb-sm-0">List Layanan</h4>
                    </div>
                    <div class="table-responsive border rounded p-1">
                      <table class="table" id="layanan-list">
                        <thead>
                          <tr>
                            <th class="font-weight-bold">ID</th>
                            <th class="font-weight-bold">Title</th>
                            <th class="font-weight-bold">Image</th>
                            <th class="font-weight-bold">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <%-
                            LAYANAN.map((layanan, index) => {
                              return `
                              <tr>
                                <td>${layanan.layananId}</td>
                                <td>${layanan.title}</td>
                                <td><img style="border-radius: 0;min-width: 15rem; min-height: 15rem;max-width: 25rem; max-height: 25rem;" src="${layanan.image}" alt="layanan image"></td>
                                <td>
                                  <button type="button" class="btn btn-danger btn-icon-text btn-sm" onclick="DeleteConfirmation('${layanan.layananId}', 'layanan')"
                                    style="width: 100px;">
                                     Hapus <i class="fa fa-trash-o btn-icon-append"></i>
                                  </button>
                                  <br>
                                  <button type="button" class="btn btn-dark btn-icon-text btn-sm" onclick="location.href='/dashboard/layanan/${layanan.layananId}'"
                                    style="width: 100px; margin-top: 5px;">
                                     Ubah <i class="fa fa-edit btn-icon-append"></i>
                                  </button>
                                </td>
                              </tr>
                              `
                            }).join('')
                          %>
                        </tbody>
                      </table>
                    </div>
                    <!-- <div class="d-flex mt-4 flex-wrap align-items-center">
                      <p class="text-muted mb-sm-0">Showing 1 to 10 of 57 entries</p>
                      <nav class="ms-auto">
                        <ul class="pagination separated pagination-info mb-sm-0">
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-left"></i></a></li>
                          <li class="page-item active"><a href="#" class="page-link">1</a></li>
                          <li class="page-item"><a href="#" class="page-link">2</a></li>
                          <li class="page-item"><a href="#" class="page-link">3</a></li>
                          <li class="page-item"><a href="#" class="page-link">4</a></li>
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-right"></i></a></li>
                        </ul>
                      </nav>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <!-- Varian -->
            <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                      <h4 class="card-title mb-sm-0">List Varian</h4>
                    </div>
                    <div class="table-responsive border rounded p-1">
                      <table class="table" id="varian-list">
                        <thead>
                          <tr>
                            <th class="font-weight-bold">ID</th>
                            <th class="font-weight-bold">Nama Varian</th>
                            <th class="font-weight-bold">Title</th>
                            <th class="font-weight-bold">Image</th>
                            <th class="font-weight-bold">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <%-
                            VARIAN.map((varian, index) => {
                              return `
                              <tr>
                                <td>${varian.varianId}</td>
                                <td>${varian.varianName}</td>
                                <td>${varian.title}</td>
                                <td><img style="border-radius: 0;min-width: 15rem; min-height: 15rem;max-width: 25rem; max-height: 25rem;" src="${varian.image}" alt="varian image"></td>
                                <td>
                                  <button type="button" class="btn btn-danger btn-icon-text btn-sm" onclick="DeleteConfirmation('${varian.varianId}', 'varian')"
                                    style="width: 100px;">
                                     Hapus <i class="fa fa-trash-o btn-icon-append"></i>
                                  </button>
                                  <br>
                                  <button type="button" class="btn btn-dark btn-icon-text btn-sm" onclick="location.href='/dashboard/varian/${varian.varianId}'"
                                    style="width: 100px; margin-top: 5px;">
                                     Ubah <i class="fa fa-edit btn-icon-append"></i>
                                  </button>
                                </td>
                              </tr>
                              `
                            }).join('')
                          %>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Review -->
            <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                      <h4 class="card-title mb-sm-0">List Review</h4>
                    </div>
                    <div class="table-responsive border rounded p-1">
                      <table class="table" id="review-list">
                        <thead>
                          <tr>
                            <th class="font-weight-bold">ID</th>
                            <th class="font-weight-bold">Nama</th>
                            <th class="font-weight-bold">Rating</th>
                            <th class="font-weight-bold"></th>
                            <th class="font-weight-bold">Message</th>
                            <th class="font-weight-bold">Action</th>
                          </tr>
                        </thead>
                        <tbody>
                          <%-
                            REVIEW.map((review, index) => {
                              return `
                              <tr>
                                <td>${review.reviewId}</td>
                                <td>${review.name}</td>
                                <td>${review.rate}</td>
                                <td>
                                  <div class="rating" style="color: var(--yellow)">
                                    ${review.rating}
                                  </div>
                                </td>
                                <td class="text-wrap">${review.message}</td>
                                <td>
                                  <button type="button" class="btn btn-danger btn-icon-text btn-sm" onclick="DeleteConfirmation('${review.reviewId}', 'review')"
                                    style="width: 100px;">
                                     Hapus <i class="fa fa-trash-o btn-icon-append"></i>
                                  </button>
                                </td>
                              </tr>
                              `
                            }).join('')
                          %>
                        </tbody>
                      </table>
                    </div>
                    <!-- <div class="d-flex mt-4 flex-wrap align-items-center">
                      <p class="text-muted mb-sm-0">Showing 1 to 10 of 57 entries</p>
                      <nav class="ms-auto">
                        <ul class="pagination separated pagination-info mb-sm-0">
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-left"></i></a></li>
                          <li class="page-item active"><a href="#" class="page-link">1</a></li>
                          <li class="page-item"><a href="#" class="page-link">2</a></li>
                          <li class="page-item"><a href="#" class="page-link">3</a></li>
                          <li class="page-item"><a href="#" class="page-link">4</a></li>
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-right"></i></a></li>
                        </ul>
                      </nav>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <!-- REVIEW -->
            <!-- <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="d-sm-flex align-items-center mb-4">
                      <h4 class="card-title mb-sm-0">Review</h4>
                      <a href="#" class="text-dark ms-auto mb-3 mb-sm-0"> View all Review</a>
                    </div>
                    <div class="table-responsive border rounded p-1">
                      <table class="table">
                        <thead>
                          <tr>
                            <th class="font-weight-bold">Store ID</th>
                            <th class="font-weight-bold">Amount</th>
                            <th class="font-weight-bold">Gateway</th>
                            <th class="font-weight-bold">Created at</th>
                            <th class="font-weight-bold">Paid at</th>
                            <th class="font-weight-bold">Status</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <img class="img-sm rounded-circle" src="/assets/images/faces/face1.jpg" alt="profile image"> Katie Holmes
                            </td>
                            <td>$3621</td>
                            <td><img src="/assets/images/dashboard/alipay.png" alt="alipay" class="gateway-icon me-2"> alipay</td>
                            <td>04 Jun 2019</td>
                            <td>18 Jul 2019</td>
                            <td>
                              <div class="badge badge-success p-2">Paid</div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <img class="img-sm rounded-circle" src="/assets/images/faces/face2.jpg" alt="profile image"> Minnie Copeland
                            </td>
                            <td>$6245</td>
                            <td><img src="/assets/images/dashboard/paypal.png" alt="alipay" class="gateway-icon me-2"> Paypal</td>
                            <td>25 Sep 2019</td>
                            <td>07 Oct 2019</td>
                            <td>
                              <div class="badge badge-danger p-2">Pending</div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <img class="img-sm rounded-circle" src="/assets/images/faces/face3.jpg" alt="profile image"> Rodney Sims
                            </td>
                            <td>$9265</td>
                            <td><img src="/assets/images/dashboard/alipay.png" alt="alipay" class="gateway-icon me-2"> alipay</td>
                            <td>12 dec 2019</td>
                            <td>26 Aug 2019</td>
                            <td>
                              <div class="badge badge-warning p-2">Failed</div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <img class="img-sm rounded-circle" src="/assets/images/faces/face4.jpg" alt="profile image"> Carolyn Barker
                            </td>
                            <td>$2263</td>
                            <td><img src="/assets/images/dashboard/alipay.png" alt="alipay" class="gateway-icon me-2"> alipay</td>
                            <td>30 Sep 2019</td>
                            <td>20 Oct 2019</td>
                            <td>
                              <div class="badge badge-success p-2">Paid</div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="d-flex mt-4 flex-wrap align-items-center">
                      <p class="text-muted mb-sm-0">Showing 1 to 10 of 57 entries</p>
                      <nav class="ms-auto">
                        <ul class="pagination separated pagination-info mb-sm-0">
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-left"></i></a></li>
                          <li class="page-item active"><a href="#" class="page-link">1</a></li>
                          <li class="page-item"><a href="#" class="page-link">2</a></li>
                          <li class="page-item"><a href="#" class="page-link">3</a></li>
                          <li class="page-item"><a href="#" class="page-link">4</a></li>
                          <li class="page-item"><a href="#" class="page-link"><i class="icon-arrow-right"></i></a></li>
                        </ul>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            </div> -->
          </div>
          <!-- content-wrapper ends -->
          <!-- partial:partials/_footer.html -->
          <footer class="footer">
            <div class="d-sm-flex justify-content-center justify-content-sm-between">
              <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright Â© 2024 Stellar. All rights reserved. <a href="#"> Terms of use</a><a href="#">Privacy Policy</a></span>
              <span class="float-none float-sm-right d-block mt-1 mt-sm-0 text-center">Hand-crafted & made with <i class="icon-heart text-danger"></i></span>
            </div>
          </footer>
          <!-- partial -->

            <!-- Quick Action -->
            <%- include('../block/modal.ejs') %>
            <%- include('../block/modal/addLayanan.ejs') %>
            <%- include('../block/modal/addVarian.ejs', {LAYANAN}) %>
        </div>
        <!-- main-panel ends -->
      </div>
      <!-- page-body-wrapper ends -->
    </div>
    <!-- container-scroller -->
    <!-- plugins:js -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="/assets/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page -->
    <!-- <script src="/assets/vendors/chart.js/chart.umd.js"></script> -->
    <!-- <script src="/assets/vendors/jvectormap/jquery-jvectormap.min.js"></script> -->
    <!-- <script src="/assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js"></script> -->
    <!-- <script src="/assets/vendors/bootstrap-datepicker/bootstrap-datepicker.min.js"></script> -->
    <script src="/assets/vendors/moment/moment.min.js"></script>
    <script src="/assets/vendors/daterangepicker/daterangepicker.js"></script>
    <!-- <script src="/assets/vendors/chartist/chartist.min.js"></script> -->
    <script src="/assets/vendors/progressbar.js/progressbar.min.js"></script>
    <script src="/assets/js/jquery.cookie.js"></script>
    <!-- End plugin js for this page -->
    <!-- inject:js -->
    <script src="/assets/js/off-canvas.js"></script>
    <script src="/assets/js/hoverable-collapse.js"></script>
    <script src="/assets/js/misc.js"></script>
    <script src="/assets/js/settings.js"></script>
    <script src="/assets/js/todolist.js"></script>
    <!-- endinject -->
    <!-- Custom js for this page -->
    <!-- <script src="/assets/js/dashboard.js"></script> -->
    <script src="/assets/js/file-upload.js"></script>
    <script src="//cdn.datatables.net/2.0.8/js/dataTables.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- End custom js for this page -->
     <script>
        // let table = new DataTable('#product-list');
        $('#product-list').DataTable({
          "autoWidth": true,  // Disable automatic column width calculation
          "aLengthMenu": [
            [5, 10, 15, -1],
            [5, 10, 15, "All"]
          ],
          "iDisplayLength": 5,
          "language": {
            search: ""
          },
          responsive: true,
          // "columnDefs": [
          //       { "width": "60%", "targets": 3 },
          //   ]
        });
        $('#layanan-list').DataTable({
          "autoWidth": true,  // Disable automatic column width calculation
          "aLengthMenu": [
            [5, 10, 15, -1],
            [5, 10, 15, "All"]
          ],
          "iDisplayLength": 5,
          "language": {
            search: ""
          },
        });
        $('#review-list').DataTable({
          "autoWidth": true,  // Disable automatic column width calculation
          "aLengthMenu": [
            [5, 10, 15, -1],
            [5, 10, 15, "All"]
          ],
          "iDisplayLength": 5,
          "language": {
            search: ""
          },
        });
        $('#varian-list').DataTable({
          "autoWidth": true,  // Disable automatic column width calculation
          "aLengthMenu": [
            [5, 10, 15, -1],
            [5, 10, 15, "All"]
          ],
          "iDisplayLength": 5,
          "language": {
            search: ""
          },
        });
     </script>
     <script>
      function toTitleCase(str) {
        return str.toLowerCase().split(' ').map(function(word) {
            return word.charAt(0).toUpperCase() + word.slice(1);
        }).join(' ');
      }

      function DeleteConfirmation(ProductId, theType) {
        Swal.fire({
          title: `Ingin menghapus data ${theType ? toTitleCase(theType) : ""}?`,
          text: "Data ini akan terhapus secara permanen!",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Ya, hapus!"
        }).then((result) => {
          if (result.isConfirmed) {
            fetch(`/dashboard/delete${theType}?${theType}Id=${ProductId}`, {
                method: 'POST'
            })
                .then(response => response.json())
                .then((data) => {
                  Swal.fire({
                    title: "Berhasil Terhapus!",
                    text: data.message,
                    icon: "success"
                  }).then((res) => {
                    location.reload();
                  });
                })
                .catch(error => console.error('Error:', error));
          }
        });
      }
     </script>
  </body>
</html>